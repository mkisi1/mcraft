<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fortune Calculator - MCraft</title>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-PLACEHOLDER" crossorigin="anonymous"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        .minecraftFont {
            font-family: 'Press Start 2P', cursive;
            line-height: 1.6;
        }
        body {
            font-family: 'Press Start 2P', cursive;
            line-height: 1.6;
            image-rendering: pixelated;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        h1, h2, h3 {
            line-height: 1.4;
        }
        p {
            line-height: 1.8;
        }
        .oreBlock {
            image-rendering: pixelated;
        }
        .selectedOre {
            border-color: #14b8a6 !important;
            background-color: #0f766e !important;
        }
        input[type="number"] {
            -moz-appearance: textfield;
        }
        input[type="number"]::-webkit-outer-spin-button,
        input[type="number"]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
    </style>
</head>
<body class="bg-slate-900 text-white">
    <nav class="border-b-4 border-slate-600 bg-slate-800 sticky top-0 z-40">
        <div class="container mx-auto px-3 sm:px-4 py-3 sm:py-4">
            <div class="flex flex-col sm:flex-row items-center justify-between gap-3 sm:gap-0">
                <h1 class="text-lg sm:text-2xl minecraftFont"><a href="../index.html">MCraft</a></h1>
                <div class="flex gap-2 sm:gap-4">
                    <a href="../index.html" class="px-2 py-1 sm:px-4 sm:py-2 text-[10px] sm:text-sm bg-slate-700 hover:bg-slate-600 transition">Home</a>
                    <a href="tools.html" class="px-2 py-1 sm:px-4 sm:py-2 text-[10px] sm:text-sm bg-slate-700 hover:bg-slate-600 transition">Tools</a>
                </div>
            </div>
        </div>
    </nav>

    <div class="flex-grow flex flex-col xl:flex-row justify-center p-4 md:p-6 gap-6 max-w-[1600px] mx-auto w-full">
        <aside class="flex-shrink-0 flex justify-center xl:block w-full xl:w-[160px] order-2 xl:order-1">
            <div class="xl:hidden w-full max-w-[320px] h-[100px] bg-slate-800 border-4 border-slate-600 rounded flex flex-col items-center justify-center text-slate-400 text-[8px] sm:text-xs uppercase tracking-widest mb-4">
                <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-PLACEHOLDER" data-ad-slot="PLACEHOLDER" data-ad-format="horizontal"></ins>
            </div>
            <div id="ad-left-desktop" class="hidden xl:flex sticky top-24 w-full h-[600px] bg-slate-800 border-4 border-slate-600 rounded flex-col items-center justify-center text-slate-400 text-xs uppercase tracking-widest">
                <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-PLACEHOLDER" data-ad-slot="PLACEHOLDER" data-ad-format="vertical"></ins>
            </div>
        </aside>

        <main class="flex-grow w-full max-w-4xl flex flex-col gap-6 order-1 xl:order-2 mx-auto">
            <div class="bg-slate-800 border-4 border-slate-600 rounded-xl p-2 flex flex-wrap sm:flex-nowrap gap-2">
                <button onclick="setFortune(0)" id="btn-f0" class="w-1/2 sm:w-auto flex-1 py-3 sm:py-4 rounded-lg text-xs sm:text-sm minecraftFont transition-colors text-slate-400 hover:bg-slate-700">No Fortune</button>
                <button onclick="setFortune(1)" id="btn-f1" class="w-1/2 sm:w-auto flex-1 py-3 sm:py-4 rounded-lg text-xs sm:text-sm minecraftFont transition-colors text-slate-400 hover:bg-slate-700">Fortune I</button>
                <button onclick="setFortune(2)" id="btn-f2" class="w-1/2 sm:w-auto flex-1 py-3 sm:py-4 rounded-lg text-xs sm:text-sm minecraftFont transition-colors text-slate-400 hover:bg-slate-700">Fortune II</button>
                <button onclick="setFortune(3)" id="btn-f3" class="w-1/2 sm:w-auto flex-1 py-3 sm:py-4 rounded-lg text-xs sm:text-sm minecraftFont transition-colors bg-teal-700 text-white">Fortune III</button>
            </div>

            <div class="bg-slate-800 border-4 border-slate-600 rounded-xl p-4 sm:p-6">
                <h3 class="text-sm sm:text-base mb-4 minecraftFont">Select Ore Block</h3>
                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3 sm:gap-4" id="oreGrid"></div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-slate-800 border-4 border-slate-600 rounded-xl p-4 sm:p-6 flex flex-col justify-center gap-4">
                    <label class="block text-xs sm:text-sm minecraftFont text-slate-400 mb-2">Amount of Ores</label>
                    <div class="relative">
                        <input type="number" id="amountInput" value="64" min="1" class="w-full bg-slate-700 border-4 border-slate-600 rounded-lg px-4 py-3 sm:py-4 text-lg sm:text-xl minecraftFont focus:outline-none focus:border-teal-500 transition-colors text-white text-center">
                        <span class="absolute right-4 top-1/2 -translate-y-1/2 text-slate-500 text-xs sm:text-sm">blocks</span>
                    </div>
                    <p class="text-[10px] sm:text-xs text-slate-500">Based on vanilla Minecraft 1.20+ mechanics.</p>
                </div>

                <div class="bg-slate-800 border-4 border-slate-600 rounded-xl p-4 sm:p-6 flex flex-col gap-4">
                    <h3 class="text-xs sm:text-sm minecraftFont text-slate-400 mb-2">Estimated Drops</h3>
                    <div class="grid grid-cols-2 gap-3 sm:gap-4">
                        <div class="bg-slate-700 rounded-lg p-3 sm:p-4 border-4 border-slate-600">
                            <span class="text-[10px] sm:text-xs text-slate-500 block uppercase mb-2">Minimum</span>
                            <span id="resMin" class="text-lg sm:text-2xl minecraftFont text-teal-400">0</span>
                        </div>
                        <div class="bg-slate-700 rounded-lg p-3 sm:p-4 border-4 border-slate-600">
                            <span class="text-[10px] sm:text-xs text-slate-500 block uppercase mb-2">Maximum</span>
                            <span id="resMax" class="text-lg sm:text-2xl minecraftFont text-teal-400">0</span>
                        </div>
                    </div>
                    <div class="mt-auto pt-4 border-t-4 border-slate-600">
                        <span class="text-xs sm:text-sm text-teal-400 block mb-1 minecraftFont uppercase">Estimated Average</span>
                        <div class="flex items-baseline gap-2">
                            <span id="resAvg" class="text-2xl sm:text-4xl minecraftFont text-white tracking-tight">0</span>
                            <span class="text-xs sm:text-sm text-slate-500">items</span>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <aside class="flex-shrink-0 flex justify-center xl:block w-full xl:w-[160px] order-3">
            <div class="xl:hidden w-full max-w-[320px] h-[100px] bg-slate-800 border-4 border-slate-600 rounded flex flex-col items-center justify-center text-slate-400 text-[8px] sm:text-xs uppercase tracking-widest mt-4">
                <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-PLACEHOLDER" data-ad-slot="PLACEHOLDER" data-ad-format="horizontal"></ins>
            </div>
            <div id="ad-right-desktop" class="hidden xl:flex sticky top-24 w-full h-[600px] bg-slate-800 border-4 border-slate-600 rounded flex-col items-center justify-center text-slate-400 text-xs uppercase tracking-widest">
                <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-PLACEHOLDER" data-ad-slot="PLACEHOLDER" data-ad-format="vertical"></ins>
            </div>
        </aside>
    </div>

    <footer class="border-t-4 border-slate-600 bg-slate-800 mt-auto">
        <div class="container mx-auto px-3 sm:px-4 py-4 sm:py-6 text-center">
            <p class="text-xs sm:text-sm text-slate-400">MCraft - Minecraft Toolset Â© 2024</p>
        </div>
    </footer>

    <script>
        let currentFortune = 3;
        let currentOre = 'diamond';

        const imgBase = "https://raw.githubusercontent.com/PrismarineJS/minecraft-assets/master/data/1.20.1/items";

        const ores = [
            { id: 'coal', name: 'Coal', oreId: 'coal_ore', type: 'mult', bMin: 1, bMax: 1 },
            { id: 'rawIron', name: 'Raw Iron', oreId: 'iron_ore', type: 'mult', bMin: 1, bMax: 1 },
            { id: 'rawCopper', name: 'Raw Copper', oreId: 'copper_ore', type: 'mult', bMin: 2, bMax: 5 },
            { id: 'rawGold', name: 'Raw Gold', oreId: 'gold_ore', type: 'mult', bMin: 1, bMax: 1 },
            { id: 'diamond', name: 'Diamond', oreId: 'diamond_ore', type: 'mult', bMin: 1, bMax: 1 },
            { id: 'emerald', name: 'Emerald', oreId: 'emerald_ore', type: 'mult', bMin: 1, bMax: 1 },
            { id: 'lapis', name: 'Lapis Lazuli', oreId: 'lapis_ore', type: 'mult', bMin: 4, bMax: 9 },
            { id: 'redstone', name: 'Redstone', oreId: 'redstone_ore', type: 'add', bMin: 4, bMax: 5 },
            { id: 'quartz', name: 'Quartz', oreId: 'nether_quartz_ore', type: 'mult', bMin: 1, bMax: 1 },
            { id: 'netherGold', name: 'Nether Gold', oreId: 'nether_gold_ore', type: 'mult', bMin: 2, bMax: 6 },
            { id: 'amethyst', name: 'Amethyst', oreId: 'amethyst_cluster', type: 'mult', bMin: 2, bMax: 4 }
        ];

        const fortuneStats = {
            0: { max: 1, avg: 1.0 },
            1: { max: 2, avg: 1.33 },
            2: { max: 3, avg: 1.75 },
            3: { max: 4, avg: 2.20 }
        };

        const gridEl = document.getElementById('oreGrid');
        const amountInput = document.getElementById('amountInput');

        function createOreCard(ore) {
            const oreDiv = document.createElement('button');
            oreDiv.className = `ore-card bg-slate-800 border-4 border-slate-600 rounded-xl p-3 sm:p-4 flex flex-col items-center gap-2 hover:border-slate-500 transition-all ${ore.id === currentOre ? 'selectedOre' : ''}`;
            oreDiv.id = `card-${ore.id}`;
            oreDiv.onclick = () => setOre(ore.id);
            
            const imgDiv = document.createElement('div');
            imgDiv.className = 'w-12 h-12 sm:w-16 sm:h-16 relative mb-2';
            
            const img = document.createElement('img');
            img.alt = ore.name;
            img.className = 'w-full h-full object-contain oreBlock';
            img.loading = 'lazy';
            
            const imageSources = [
                `https://minecraft.wiki/images/${ore.oreId}_JE.png`,
                `https://minecraft.wiki/images/${ore.name.replace(/\s+/g, '_')}_Ore_JE.png`,
                `https://minecraft-heads.com/image/${ore.oreId}`,
                `https://raw.githubusercontent.com/InventivetalentDev/minecraft-assets/1.20.1/assets/minecraft/textures/block/${ore.oreId}.png`,
                `https://minecraft.wiki/images/block/${ore.oreId}.png`
            ];
            
            let currentSourceIndex = 0;
            img.src = imageSources[0];
            
            img.onerror = function() {
                currentSourceIndex++;
                if (currentSourceIndex < imageSources.length) {
                    this.src = imageSources[currentSourceIndex];
                } else {
                    const encodedName = encodeURIComponent(ore.name);
                    this.src = `data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="64" height="64"%3E%3Crect fill="%23475569" width="64" height="64"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="white" font-size="6"%3E${encodedName}%3C/text%3E%3C/svg%3E`;
                }
            };
            
            imgDiv.appendChild(img);
            
            const name = document.createElement('span');
            name.className = 'text-[10px] sm:text-xs minecraftFont text-slate-300 text-center leading-tight';
            name.textContent = ore.name;
            
            oreDiv.appendChild(imgDiv);
            oreDiv.appendChild(name);
            
            return oreDiv;
        }

        function init() {
            gridEl.innerHTML = '';
            ores.forEach(ore => {
                gridEl.appendChild(createOreCard(ore));
            });

            calculate();
        }

        function setFortune(level) {
            currentFortune = level;
            [0, 1, 2, 3].forEach(i => {
                const btn = document.getElementById(`btn-f${i}`);
                if (i === level) {
                    btn.className = "w-1/2 sm:w-auto flex-1 py-3 sm:py-4 rounded-lg text-xs sm:text-sm minecraftFont transition-colors bg-teal-700 text-white";
                } else {
                    btn.className = "w-1/2 sm:w-auto flex-1 py-3 sm:py-4 rounded-lg text-xs sm:text-sm minecraftFont transition-colors text-slate-400 hover:bg-slate-700";
                }
            });
            calculate();
        }

        function setOre(id) {
            currentOre = id;
            document.querySelectorAll('.ore-card').forEach(el => {
                el.classList.remove('selectedOre');
            });
            document.getElementById(`card-${id}`).classList.add('selectedOre');
            calculate();
        }

        function calculate() {
            const blocks = parseInt(amountInput.value) || 0;
            const data = ores.find(o => o.id === currentOre);
            const fortune = fortuneStats[currentFortune];
            let min = 0, max = 0, avg = 0;

            if (blocks > 0) {
                if (data.type === 'mult') {
                    min = blocks * data.bMin;
                    max = blocks * data.bMax * fortune.max;
                    const avgBase = (data.bMin + data.bMax) / 2;
                    avg = blocks * avgBase * fortune.avg;
                } else if (data.type === 'add') {
                    min = blocks * data.bMin;
                    max = blocks * (data.bMax + currentFortune);
                    const avgBase = (data.bMin + data.bMax) / 2;
                    const avgBonus = currentFortune / 2;
                    avg = blocks * (avgBase + avgBonus);
                }
            }

            document.getElementById('resMin').innerText = min.toLocaleString(undefined, { maximumFractionDigits: 2 });
            document.getElementById('resMax').innerText = max.toLocaleString(undefined, { maximumFractionDigits: 2 });
            document.getElementById('resAvg').innerText = avg.toLocaleString(undefined, { maximumFractionDigits: 2 });
        }

        amountInput.addEventListener('input', calculate);

        init();
        setFortune(3);

        (adsbygoogle = window.adsbygoogle || []).push({});
        (adsbygoogle = window.adsbygoogle || []).push({});
        (adsbygoogle = window.adsbygoogle || []).push({});
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</body>
</html>